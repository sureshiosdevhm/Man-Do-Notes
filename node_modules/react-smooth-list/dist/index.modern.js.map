{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { JSXElementConstructor, PropsWithChildren, useEffect, useState } from \"react\";\n  \ninterface Props {\n    transitionDuration?: number;\n    delay?: number;\n    wrapperTag?: JSXElementConstructor<any>;\n    childTag?: JSXElementConstructor<any>;\n    className?: string;\n    childClassName?: string;\n    visible?: boolean;\n    animated?: boolean;\n    onComplete?: () => any;\n}\n  \nconst SmoothList = (props: PropsWithChildren<Props>) => {\n    const [maxIsVisible, setMaxIsVisible] = useState(0);\n\n    const delay = props.delay || 50,\n          animated = props.animated ?? true,\n          transitionDuration = props.transitionDuration || 400,\n          visible = typeof props.visible === \"undefined\" ? true : props.visible,\n          WrapperTag = props.wrapperTag || \"div\",\n          ChildTag = props.childTag || \"div\";\n  \n    useEffect(() => {\n        let count = React.Children.count(props.children);\n        if (!visible) {\n            // Animate all children out\n            count = 0;\n        }\n\n        if (count == maxIsVisible) {\n            // We're done updating maxVisible, notify when animation is done\n            const timeout = setTimeout(() => {\n                if (props.onComplete) props.onComplete();\n            }, transitionDuration);\n            \n            return () => clearTimeout(timeout)\n        }\n\n        // Move maxIsVisible toward count\n        const increment = count > maxIsVisible ? 1 : -1;\n        const timeout = setTimeout(() => {\n            setMaxIsVisible(maxIsVisible + increment);\n        }, delay);\n        \n        return () => clearTimeout(timeout)\n    }, [\n        React.Children.count(props.children),\n        delay,\n        maxIsVisible,\n        visible,\n        transitionDuration,\n    ])\n  \n    return (\n        <WrapperTag className={props.className}>\n            {animated ? React.Children.map(props.children, (child, i) => {\n                return (\n                    <ChildTag\n                        className={props.childClassName}\n                        style={{\n                        transition: `opacity ${transitionDuration}ms, transform ${transitionDuration}ms`,\n                        transform: maxIsVisible > i ? \"none\" : \"translateY(20px)\",\n                        opacity: maxIsVisible > i ? 1 : 0,\n                        }}\n                    >\n                        {child}\n                    </ChildTag>\n                )\n            }) : props.children}\n        </WrapperTag>\n    )\n}\n\nexport default SmoothList;"],"names":["SmoothList","props","useState","maxIsVisible","setMaxIsVisible","delay","animated","transitionDuration","visible","WrapperTag","wrapperTag","ChildTag","childTag","useEffect","count","React","Children","children","timeout","setTimeout","onComplete","clearTimeout","increment","className","map","child","i","childClassName","style","transition","transform","opacity"],"mappings":";;AAcA,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD;;;AACf,kBAAwCC,QAAQ,CAAC,CAAD,CAAhD;AAAA,MAAOC,YAAP;AAAA,MAAqBC,eAArB;;AAEA,MAAMC,KAAK,GAAGJ,KAAK,CAACI,KAAN,IAAe,EAA7B;AAAA,MACMC,QAAQ,sBAAGL,KAAK,CAACK,QAAT,8BAAqB,IADnC;AAAA,MAEMC,kBAAkB,GAAGN,KAAK,CAACM,kBAAN,IAA4B,GAFvD;AAAA,MAGMC,OAAO,GAAG,OAAOP,KAAK,CAACO,OAAb,KAAyB,WAAzB,GAAuC,IAAvC,GAA8CP,KAAK,CAACO,OAHpE;AAAA,MAIMC,UAAU,GAAGR,KAAK,CAACS,UAAN,IAAoB,KAJvC;AAAA,MAKMC,QAAQ,GAAGV,KAAK,CAACW,QAAN,IAAkB,KALnC;AAOAC,EAAAA,SAAS,CAAC;AACN,QAAIC,KAAK,GAAGC,KAAK,CAACC,QAAN,CAAeF,KAAf,CAAqBb,KAAK,CAACgB,QAA3B,CAAZ;;AACA,QAAI,CAACT,OAAL,EAAc;AAEVM,MAAAA,KAAK,GAAG,CAAR;AACH;;AAED,QAAIA,KAAK,IAAIX,YAAb,EAA2B;AAEvB,UAAMe,QAAO,GAAGC,UAAU,CAAC;AACvB,YAAIlB,KAAK,CAACmB,UAAV,EAAsBnB,KAAK,CAACmB,UAAN;AACzB,OAFyB,EAEvBb,kBAFuB,CAA1B;;AAIA,aAAO;AAAA,eAAMc,YAAY,CAACH,QAAD,CAAlB;AAAA,OAAP;AACH;;AAGD,QAAMI,SAAS,GAAGR,KAAK,GAAGX,YAAR,GAAuB,CAAvB,GAA2B,CAAC,CAA9C;AACA,QAAMe,OAAO,GAAGC,UAAU,CAAC;AACvBf,MAAAA,eAAe,CAACD,YAAY,GAAGmB,SAAhB,CAAf;AACH,KAFyB,EAEvBjB,KAFuB,CAA1B;AAIA,WAAO;AAAA,aAAMgB,YAAY,CAACH,OAAD,CAAlB;AAAA,KAAP;AACH,GAvBQ,EAuBN,CACCH,KAAK,CAACC,QAAN,CAAeF,KAAf,CAAqBb,KAAK,CAACgB,QAA3B,CADD,EAECZ,KAFD,EAGCF,YAHD,EAICK,OAJD,EAKCD,kBALD,CAvBM,CAAT;AA+BA,SACIQ,mBAAA,CAACN,UAAD;AAAYc,IAAAA,SAAS,EAAEtB,KAAK,CAACsB;GAA7B,EACKjB,QAAQ,GAAGS,KAAK,CAACC,QAAN,CAAeQ,GAAf,CAAmBvB,KAAK,CAACgB,QAAzB,EAAmC,UAACQ,KAAD,EAAQC,CAAR;AAC3C,WACIX,mBAAA,CAACJ,QAAD;AACIY,MAAAA,SAAS,EAAEtB,KAAK,CAAC0B;AACjBC,MAAAA,KAAK,EAAE;AACPC,QAAAA,UAAU,eAAatB,kBAAb,sBAAgDA,kBAAhD,OADH;AAEPuB,QAAAA,SAAS,EAAE3B,YAAY,GAAGuB,CAAf,GAAmB,MAAnB,GAA4B,kBAFhC;AAGPK,QAAAA,OAAO,EAAE5B,YAAY,GAAGuB,CAAf,GAAmB,CAAnB,GAAuB;AAHzB;KAFX,EAQKD,KARL,CADJ;AAYH,GAbW,CAAH,GAaJxB,KAAK,CAACgB,QAdf,CADJ;AAkBH,CA3DD;;;;"}